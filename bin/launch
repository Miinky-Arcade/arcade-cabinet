#!/bin/sh
# Starts the server and launches the front end.

echo "\033[0;32m>> Starting HyperMike\033[0m"
git fetch origin --prune
git reset --hard origin/master
bundle install
bundle exec thin start &
pid="$!"
sleep 3

case $(uname -s) in
	"Linux")
		google-chrome --app=http://localhost:3000 &
		sleep 3
		xdotool key F11
		;;
	"Darwin")
		open -a "Google Chrome" --args --app=http://localhost:3000 &
		# TODO:
		# go full screen
		;;
esac

echo "\033[0;32m>> HyperMike started, CTRL+C to stop\033[0m"
trap 'echo HyperMike, goodbye!; kill $pid; exit ' SIGINT SIGTERM
wait
